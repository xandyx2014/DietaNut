<ion-header>
  <ion-toolbar>
    <ion-title color="primary">Creando una dieta...</ion-title>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/intercambio" text="Atras"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ng-container *ngIf="isRender; else elseTemplate">
    <form [formGroup]="myForm" #title>
      <ion-item>
        <ion-label position="stacked">Nombre de la dieta</ion-label>
        <ion-input formControlName="titulo" placeholder="Mi nombre de la dieta sera...."></ion-input>
        <ion-text *ngIf="myForm.get('titulo').invalid && myForm.get('titulo').touched" lines="none" color="danger"
          class="form-error">
          Por favor coloca un nombre a la dieta
        </ion-text>
      </ion-item>
      <ion-item>
        <ion-label position="stacked">Descripcion de la dieta</ion-label>
        <ion-input formControlName="descripcion" placeholder="Descripcion de la dieta...."></ion-input>
      </ion-item>
      <div formGroupName="calorias">
        <ion-text color="dark">
          <h3 style="margin-left: 15px;">Calorias y distribucion</h3>
        </ion-text>
        <ion-item>
          <ion-label position="stacked">Gasto energetico diario kcal</ion-label>
          <ion-input formControlName="gastoEnergetico" placeholder="Gasto energetico"></ion-input>
        </ion-item>
        <table>
          <thead>
            <tr>
              <th>Macronutrientes</th>
              <th>%</th>
              <th>Calorias</th>
              <th>Gramos</th>
            </tr>
          </thead>
          <tr>
            <td>Carbohidratos</td>
            <td style="width: 25%;">
              <ion-input formControlName="carbohidrato" placeholder="Carbohidrato"></ion-input>
            </td>
            <td>
              <ion-input formControlName="carbohidratoCaloria" placeholder="Gasto energetico"></ion-input>
            </td>
            <td>
              <ion-input formControlName="carbohidratoGramo" placeholder="Gasto energetico"></ion-input>
            </td>
          </tr>
          <tr>
            <td>Proteina</td>
            <td style="width: 25%;">
              <ion-input formControlName="proteina" placeholder="Proteina"></ion-input>
            </td>
            <td>
              <ion-input formControlName="proteinaCaloria" placeholder="Gasto energetico"></ion-input>
            </td>
            <td>
              <ion-input formControlName="proteinaGramo" placeholder="Gasto energetico"></ion-input>
            </td>
          </tr>
          <tr>
            <td>Lipidos</td>
            <td style="width: 25%;">
              <ion-input formControlName="grasas" placeholder="Grasas"></ion-input>
            </td>
            <td>
              <ion-input formControlName="grasasCaloria" placeholder="Gasto energetico"></ion-input>
            </td>
            <td>
              <ion-input formControlName="grasasGramo" placeholder="Gasto energetico"></ion-input>
            </td>
          </tr>
          <tr>
            <td>SubTotal</td>
            <td style="width: 25%;">
              {{ controlForm('calorias').get('total').value }}
            </td>
            <td>
              {{ controlForm('calorias').get('totalCaloria').value }}
            </td>
            <td>
              {{ controlForm('calorias').get('totalGramo').value }}
            </td>
          </tr>
        </table>
      </div>
      <div>
        <ion-item>
          <ion-label color="dark">
            <b>Intercambio</b>
          </ion-label>
        </ion-item>
        <table>
          <thead>
            <th>Grupo alimentos</th>
            <th>Porción</th>
            <th>Energia</th>
            <th>Proteinas</th>
            <th>Carbohidratos</th>
            <th>Lipidos</th>
          </thead>
          <tbody formGroupName="ingesta">
            <tr formGroupName="cereales">
              <td>Cereales y derivados, tubérculos y leguminosas</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="verduras">
              <td>Verduras</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="frutas">
              <td>Frutas</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="leche">
              <td>Leche y derivados</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="carne">
              <td>Carnes, pescado y huevos</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="azucarados">
              <td>Productos azucarados</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="grasas">
              <td>Lipidos</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr>
              <td>Total</td>
              <td>{{ this.controlForm('ingesta').get('totalRacion').value }}</td>
              <td>{{ this.controlForm('ingesta').get('totalEnergia').value }}</td>
              <td>{{ this.controlForm('ingesta').get('totalProteina').value }}</td>
              <td>{{ this.controlForm('ingesta').get('totalLipido').value }}</td>
              <td>{{ this.controlForm('ingesta').get('totalCarbohidrato').value }}</td>
            </tr>
            <tr formGroupName="requerimiento">
              <td>Requerimiento</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="energia" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="proteina" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="lipido" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="carbohidrato" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="adecuacion">
              <td>% adecuacion</td>
              <td>{{ controlForm('ingesta').get('adecuacion').value.racion }} %</td>
              <td>{{ controlForm('ingesta').get('adecuacion').value.energia }} %</td>
              <td>{{ controlForm('ingesta').get('adecuacion').value.proteina }} %</td>
              <td>{{ controlForm('ingesta').get('adecuacion').value.lipido }} %</td>
              <td>{{ controlForm('ingesta').get('adecuacion').value.carbohidrato }} %</td>
            </tr>
          </tbody>
        </table>
        <ion-item>
          <ion-label color="dark">
            <b>Distribuye tus porciones</b>
          </ion-label>
        </ion-item>
        <table>
          <thead>
            <th style="width: 20%;">Grupo alimentos</th>
            <th>Porción</th>
            <th>Desayuno</th>
            <th>Merienda</th>
            <th>Almuerzo</th>
            <th>Merienda</th>
            <th>Cena</th>
          </thead>
          <tbody formGroupName="distribucion">
            <tr formGroupName="cereales">
              <td>
                Cereales y derivados, tuberculos y luguminosas
                <!-- <ion-text *ngIf="controlForm('distribucion').get('cereales').get('racion').value == 3" color="warning">
                  Estas sobrepasando la racion 
                </ion-text> -->

              </td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="verduras">
              <td>Verduras</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="frutas">
              <td>Frutas</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="leche">
              <td>Leche y derivados</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="carne">
              <td>Carne, pescado y huevos</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="azucarados">
              <td>Azucarados</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
            <tr formGroupName="grasas">
              <td>Lipidos</td>
              <td>
                <ion-input formControlName="racion" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="desayuno" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="almuerzo" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="merienda" placeholder="Racion"></ion-input>
              </td>
              <td>
                <ion-input formControlName="cena" placeholder="Racion"></ion-input>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <ion-button (click)="store(title)" expand="full" class="ion-margin-top">
        <ion-icon name="save-outline"></ion-icon>
        Guardar
      </ion-button>
    </form>
  </ng-container>
  <ng-template #elseTemplate>

  </ng-template>

</ion-content>